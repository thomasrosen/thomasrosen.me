{"version":3,"sources":["components/pages/article.js"],"names":["units","year","month","day","hour","minute","second","rtf","Intl","RelativeTimeFormat","numeric","getRelativeTime","d1","d2","arguments","length","undefined","Date","elapsed","getTime","u","Math","abs","format","round","Article","_useState","useState","_useState2","_slicedToArray","article","setArticle","_useState3","_useState4","loading","setLoading","_useState5","_useState6","error","setError","useEffect","fetch","window","location","pathname","split","pop","then","response","json","data","relative_date","date","catch","_jsxs","className","concat","font","children","_jsx","message","_Fragment","itemprop","title","datetime","tags","map","tag","disabled","audio","controls","preload","style","width","marginBlockEnd","src","type","href","dangerouslySetInnerHTML","__html","html","Dot"],"mappings":"uNAOMA,EAAQ,CACZC,KAAM,QACNC,MAAQ,OACRC,IAAK,MACLC,KAAM,KACNC,OAAQ,IACRC,OAAQ,KAGJC,EAAM,IAAIC,KAAKC,mBAAmB,KAAM,CAAEC,QAAS,SAEnDC,EAAkB,SAACC,GAAyB,IAArBC,EAAEC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,IAAIG,KAC9BC,EAAUN,EAAGO,UAAYN,EAAGM,UAGlC,IAAK,IAAMC,KAAKpB,EACd,GAAIqB,KAAKC,IAAIJ,GAAWlB,EAAMoB,IAAY,WAANA,EAClC,OAAOb,EAAIgB,OAAOF,KAAKG,MAAMN,EAAUlB,EAAMoB,IAAKA,EAGxD,EAEe,SAASK,IACtB,IAAAC,EAA8BC,mBAAS,MAAKC,EAAAC,YAAAH,EAAA,GAArCI,EAAOF,EAAA,GAAEG,EAAUH,EAAA,GAC1BI,EAA8BL,oBAAS,GAAKM,EAAAJ,YAAAG,EAAA,GAArCE,EAAOD,EAAA,GAAEE,EAAUF,EAAA,GAC1BG,EAA0BT,mBAAS,MAAKU,EAAAR,YAAAO,EAAA,GAAjCE,EAAKD,EAAA,GAAEE,EAAQF,EAAA,GAkBtB,OAhBAG,qBAAU,WAERC,MAAM,kBAAoBC,OAAOC,SAASC,SAASC,MAAM,KAAKC,MAAQ,SACnEC,MAAK,SAAAC,GAAQ,OAAIA,EAASC,MAAM,IAChCF,MAAK,SAAAG,GACJA,EAAKpB,QAAQqB,cAAgBxC,EAAgB,IAAIM,KAAKiC,EAAKpB,QAAQsB,OAEnErB,EAAWmB,EAAKpB,SAChBK,GAAW,EACb,IACCkB,OAAM,SAAAf,GACLC,EAASD,GACTH,GAAW,EACb,GACJ,GAAG,IAEImB,eAAA,OAAKC,UAAS,uBAAAC,OAA2B1B,GAA4B,UAAjBA,EAAQ2B,KAAmB,aAAe,mBAAoBC,SAAA,CACtHxB,GAAWyB,cAAA,KAAAD,SAAG,uBACdpB,GAASgB,eAAA,KAAAI,SAAA,CAAG,0BAAwBpB,EAAMsB,WAGvC9B,EACEwB,eAAAO,WAAA,CAAAH,SAAA,CACAC,cAAA,MAAIG,SAAS,WAAUJ,SAAE5B,EAAQiC,QAEjCJ,cAAA,KAAAD,SAAGJ,eAAA,UAAAI,SAAA,CACDC,cAAA,QAAMK,SAAUlC,EAAQsB,KAAMW,MAAOjC,EAAQsB,KAAMU,SAAS,gBAAeJ,SAAE5B,EAAQqB,gBAAqB,cAAGQ,cAAA,QAAMJ,UAAU,UAAUO,SAAS,WAAUJ,SAAE5B,EAAQmC,KAAKC,KAAI,SAAAC,GAAG,OAAIR,cAAA,UAAQJ,UAAU,QAAQa,UAAQ,EAAAV,SAAYS,GAANA,EAAmB,WAI7OrC,EAAQuC,OAAkC,kBAAlBvC,EAAQuC,OAAsBvC,EAAQuC,MAAMtD,OAAS,EAC7EuC,eAAA,SACEgB,UAAQ,EACRC,QAAQ,WACRC,MAAO,CAAEC,MAAO,OAAQC,eAAgB,QACxCC,IAAK7C,EAAQuC,MAAMX,SAAA,CAEnBC,cAAA,UAAQgB,IAAK7C,EAAQuC,MAAOO,KAAK,eACjCjB,cAAA,KAAAD,SACEC,cAAA,KAAGkB,KAAM/C,EAAQuC,MAAMX,SACrBC,cAAA,UAAAD,SAAQ,0CAId,KAGJC,cAAA,OAAKmB,wBAAyB,CAAEC,OAAQjD,EAAQkD,MAAQlB,SAAS,gBACjEH,cAACsB,IAAG,OAEJ,OAGV,C","file":"static/js/3.f0946a6a.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react'\n\nimport '../../fonts/petrona-v28-latin/index.css'\n\n// import { Link } from 'react-router-dom'\nimport Dot from '../dot.js'\n\nconst units = {\n  year: 24 * 60 * 60 * 1000 * 365,\n  month: (24 * 60 * 60 * 1000 * 365) / 12,\n  day: 24 * 60 * 60 * 1000,\n  hour: 60 * 60 * 1000,\n  minute: 60 * 1000,\n  second: 1000\n};\n\nconst rtf = new Intl.RelativeTimeFormat('en', { numeric: 'auto' });\n\nconst getRelativeTime = (d1, d2 = new Date()) => {\n  const elapsed = d1.getTime() - d2.getTime();\n\n  // \"Math.abs\" accounts for both \"past\" & \"future\" scenarios\n  for (const u in units) {\n    if (Math.abs(elapsed) > units[u] || u === 'second') {\n      return rtf.format(Math.round(elapsed / units[u]), u);\n    }\n  }\n};\n\nexport default function Article() {\n  const [article, setArticle] = useState(null)\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState(null)\n\n  useEffect(() => {\n    // fetch the article from /blog/articles/{slug}.json\n    fetch('/blog/articles/' + window.location.pathname.split('/').pop() + '.json')\n      .then(response => response.json())\n      .then(data => {\n        data.article.relative_date = getRelativeTime(new Date(data.article.date))\n\n        setArticle(data.article)\n        setLoading(false)\n      })\n      .catch(error => {\n        setError(error)\n        setLoading(false)\n      })\n  }, [])\n\n  return <div className={`tab_content article ${!!article && article.font === 'serif' ? 'serif_font' : 'sans_serif_font'}`}>\n    {loading && <p>Loading article...</p>}\n    {error && <p>Error loading article: {error.message}</p>}\n\n    {\n      !!article\n        ? <>\n          <h2 itemprop=\"headline\">{article.title}</h2>\n\n          <p><strong>\n            <time datetime={article.date} title={article.date} itemprop=\"datePublished\">{article.relative_date}</time> — <span className=\"tag_row\" itemprop=\"keywords\">{article.tags.map(tag => <button className=\"small\" disabled key={tag}>{tag}</button>)}</span>\n          </strong></p>\n\n          {\n            !!article.audio && typeof article.audio === 'string' && article.audio.length > 0\n            ? <audio\n                controls\n                preload=\"metadata\"\n                style={{ width: '100%', marginBlockEnd: '20px' }}\n                src={article.audio}\n              >\n                <source src={article.audio} type=\"audio/mpeg\" />\n                <p>\n                  <a href={article.audio}>\n                    <button>Download audio of the article.</button>\n                  </a>\n                </p>\n              </audio>\n            : null\n          }\n\n          <div dangerouslySetInnerHTML={{ __html: article.html }} itemprop=\"articleBody\" />\n          <Dot />\n        </>\n        : null\n    }\n  </div>\n}\n"],"sourceRoot":""}