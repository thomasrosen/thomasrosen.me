{"version":3,"sources":["components/pages/article.js"],"names":["units","year","month","day","hour","minute","second","rtf","Intl","RelativeTimeFormat","numeric","getRelativeTime","d1","d2","arguments","length","undefined","Date","elapsed","getTime","u","Math","abs","format","round","Article","article","setArticle","useState","loading","setLoading","error","setError","useEffect","fetch","window","location","pathname","split","pop","then","response","json","data","relative_date","date","catch","images","coverphoto","concat","_jsxs","className","font","children","_jsx","message","_Fragment","itemprop","title","datetime","tags","map","tag","disabled","audio","controls","preload","style","width","marginBlockEnd","src","type","href","dangerouslySetInnerHTML","__html","html","Dot","content","alt","maxWidth","JSON","stringify","slug"],"mappings":"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","file":"static/js/3.2134bf1e.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react'\n\nimport '../../fonts/petrona-v28-latin/index.css'\n\n// import { Link } from 'react-router-dom'\nimport Dot from '../dot.js'\n\nconst units = {\n  year: 24 * 60 * 60 * 1000 * 365,\n  month: (24 * 60 * 60 * 1000 * 365) / 12,\n  day: 24 * 60 * 60 * 1000,\n  hour: 60 * 60 * 1000,\n  minute: 60 * 1000,\n  second: 1000\n};\n\nconst rtf = new Intl.RelativeTimeFormat('en', { numeric: 'auto' });\n\nconst getRelativeTime = (d1, d2 = new Date()) => {\n  const elapsed = d1.getTime() - d2.getTime();\n\n  // \"Math.abs\" accounts for both \"past\" & \"future\" scenarios\n  for (const u in units) {\n    if (Math.abs(elapsed) > units[u] || u === 'second') {\n      return rtf.format(Math.round(elapsed / units[u]), u);\n    }\n  }\n};\n\nexport default function Article() {\n  const [article, setArticle] = useState(null)\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState(null)\n\n  useEffect(() => {\n    // fetch the article from /blog/articles/{slug}.json\n    fetch('/blog/articles/' + window.location.pathname.split('/').pop() + '.json')\n      .then(response => response.json())\n      .then(data => {\n        data.article.relative_date = getRelativeTime(new Date(data.article.date))\n\n        setArticle(data.article)\n        setLoading(false)\n      })\n      .catch(error => {\n        setError(error)\n        setLoading(false)\n      })\n  }, [])\n\n  let images = null\n  if (!!article && typeof article.coverphoto === 'string' && article.coverphoto.length > 0) {\n    images = [`https://thomasrosen.me/${article.coverphoto}`]\n  }\n\n  return <div className={`tab_content article ${!!article && article.font === 'serif' ? 'serif_font' : 'sans_serif_font'}`}>\n    {loading && <p>Loading article...</p>}\n    {error && <p>Error loading article: {error.message}</p>}\n\n    {\n      !!article\n        ? <>\n          <h2 itemprop=\"headline\">{article.title}</h2>\n\n          <p><strong>\n            <time datetime={article.date} title={article.date} itemprop=\"datePublished\">{article.relative_date}</time> — <span className=\"tag_row\" itemprop=\"keywords\">{article.tags.map(tag => <button className=\"small\" disabled key={tag}>{tag}</button>)}</span>\n          </strong></p>\n\n          {\n            !!article.audio && typeof article.audio === 'string' && article.audio.length > 0\n            ? <audio\n                controls\n                preload=\"metadata\"\n                style={{ width: '100%', marginBlockEnd: '20px' }}\n                src={article.audio}\n              >\n                <source src={article.audio} type=\"audio/mpeg\" />\n                <p>\n                  <a href={article.audio}>\n                    <button>Download audio of the article.</button>\n                  </a>\n                </p>\n              </audio>\n            : null\n          }\n\n          <div dangerouslySetInnerHTML={{ __html: article.html }} itemprop=\"articleBody\" />\n          <Dot />\n\n          {\n            (!!article && typeof article.coverphoto === 'string' && article.coverphoto.length > 0)\n              ? <>\n                <br />\n                <br />\n                <meta itemprop=\"image\" content={`https://thomasrosen.me/${article.coverphoto}`} />\n                <img src={article.coverphoto} alt={article.title} style={{\n                  width: '200px',\n                  maxWidth: '100%',\n                }} />\n              </>\n              : null\n          }\n\n          <script type=\"application/ld+json\">\n            {JSON.stringify({\n              \"@context\": \"https://schema.org\",\n              \"@type\": \"BlogPosting\",\n              \"mainEntityOfPage\": {\n                \"@type\": \"WebPage\",\n                \"@id\": `https://thomasrosen.me/articles/${article.slug}`\n              },\n              \"headline\": article.title,\n              \"image\": images,\n              \"datePublished\": article.date,\n              \"dateModified\": article.date,\n              \"author\": {\n                \"@type\": \"Person\",\n                \"name\": \"Thomas Rosen\"\n              },\n              \"publisher\": {\n                \"@type\": \"Organization\",\n                \"name\": \"Thomas Rosen\",\n                \"logo\": {\n                  \"@type\": \"ImageObject\",\n                  \"url\": \"https://thomasrosen.me/images/me_small.jpg\",\n                  \"width\": 800,\n                  \"height\": 800,\n                }\n              },\n              // \"description\": \"Brief description of the blog article.\",\n              \"articleBody\": article.html,\n            })}\n          </script>\n        </>\n        : null\n    }\n  </div>\n}\n"],"sourceRoot":""}